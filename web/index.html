<!DOCTYPE html>
<html lang="tr">
<head>
    <meta charset="UTF-8">
    <title>Sentiric LLM GeliÅŸtirme StÃ¼dyosu</title>
    <script src="https://unpkg.com/vue@3/dist/vue.global.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/marked/marked.min.js"></script>
    <script src="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/highlight.min.js"></script>
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/highlight.js/11.9.0/styles/github-dark.min.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600&display=swap" rel="stylesheet">
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="app">
        <header class="app-header">
            <div class="logo">
                <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg"><path d="M12 2L2 7V17L12 22L22 17V7L12 2Z" stroke="#8ab4f8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M2 7L12 12L22 7" stroke="#8ab4f8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/><path d="M12 22V12" stroke="#8ab4f8" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"/></svg>
                <span>Sentiric LLM Studio</span>
            </div>
            <div class="header-actions">
                <button @click="clearHistory" class="header-button" title="Sohbet geÃ§miÅŸini temizle">
                    <svg xmlns="http://www.w3.org/2000/svg" width="16" height="16" fill="currentColor" viewBox="0 0 16 16"><path d="M5.5 5.5A.5.5 0 0 1 6 6v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm2.5 0a.5.5 0 0 1 .5.5v6a.5.5 0 0 1-1 0V6a.5.5 0 0 1 .5-.5zm3 .5a.5.5 0 0 0-1 0v6a.5.5 0 0 0 1 0V6z"/><path fill-rule="evenodd" d="M14.5 3a1 1 0 0 1-1 1H13v9a2 2 0 0 1-2 2H5a2 2 0 0 1-2-2V4h-.5a1 1 0 0 1-1-1V2a1 1 0 0 1 1-1H6a1 1 0 0 1 1-1h2a1 1 0 0 1 1 1h3.5a1 1 0 0 1 1 1v1zM4.118 4 4 4.059V13a1 1 0 0 0 1 1h6a1 1 0 0 0 1-1V4.059L11.882 4H4.118zM2.5 3V2h11v1h-11z"/></svg>
                    <span>GeÃ§miÅŸi Temizle</span>
                </button>
            </div>
        </header>

        <aside class="panel sidebar">
            <h3>ğŸš€ Oturum AyarlarÄ±</h3>
            <div class="form-group"><label>Sistem Promptu</label><textarea v-model="systemPrompt" rows="6"></textarea></div>
            <div class="form-group"><label>RAG Context</label><select v-model="selectedContext" @change="loadContext"><option value="">-- RAG Yok --</option><option v-for="ctx in availableContexts" :value="ctx">{{ ctx }}</option></select><textarea v-model="ragContext" rows="10" placeholder="RAG iÃ§in kullanÄ±lacak metni buraya yapÄ±ÅŸtÄ±rÄ±n..."></textarea></div>
            
            <h3>âš™ï¸ Ãœretim Parametreleri</h3>
            <div class="form-group">
                <label class="param-label"><span>SÄ±caklÄ±k (YaratÄ±cÄ±lÄ±k)</span><span>{{ params.temperature }}</span></label>
                <input type="range" v-model.number="params.temperature" step="0.05" min="0" max="2">
            </div>
            <div class="form-group">
                <label class="param-label"><span>Tekrarlama CezasÄ±</span><span>{{ params.repetition_penalty }}</span></label>
                <input type="range" v-model.number="params.repetition_penalty" step="0.05" min="1" max="2">
            </div>
        </aside>

        <main class="main-content">
            <div class="chat-history" ref="chatHistory">
                <div v-for="(msg, index) in history" :key="index" class="message-wrapper">
                    <div v-if="msg.role === 'user'" class="user-message"><div class="content" v-text="msg.content"></div></div>
                    <div v-else class="assistant-message"><div class="content" v-html="renderAssistantMessage(msg)"></div></div>
                </div>
                 <div v-if="isLoading" class="spinner-wrapper"><div class="spinner"></div></div>
            </div>
            <div class="input-area-wrapper">
                <div class="input-area">
                    <textarea ref="userInput" v-model="userInput" @keydown.enter.exact.prevent="sendMessage" :disabled="isLoading" placeholder="MesajÄ±nÄ±zÄ± yazÄ±n..."></textarea>
                    <button v-if="!isLoading" @click="sendMessage" class="send-button" title="GÃ¶nder">
                        <svg xmlns="http://www.w3.org/2000/svg" width="20" height="20" fill="currentColor" viewBox="0 0 16 16"><path d="M15.854.146a.5.5 0 0 1 .11.54l-5.819 14.547a.75.75 0 0 1-1.329.124l-3.178-4.995L.643 7.184a.75.75 0 0 1 .124-1.33L15.314.037a.5.5 0 0 1 .54.11ZM6.636 10.07l2.761 4.338L14.13 2.576 6.636 10.07Zm6.787-8.201L1.591 6.602l4.339 2.76 7.494-7.493Z"/></svg>
                    </button>
                    <button v-if="isLoading" @click="stopGeneration" class="stop-button">Durdur</button>
                </div>
            </div>
        </main>
        
        <aside class="panel metrics-panel">
            <h3>ğŸ“Š Analiz</h3>
            <div class="metric-item"><label>Ä°lk Token SÃ¼resi (TTFT)</label><div class="value">{{ metrics.ttft }} ms</div></div>
            <div class="metric-item"><label>Token/Saniye (TPS)</label><div class="value">{{ metrics.tps.toFixed(2) }}</div></div>
            <div class="metric-item"><label>Token SayÄ±larÄ± (Prompt/Cevap)</label><div class="value">{{ metrics.promptTokens }} / {{ metrics.completionTokens }}</div></div>
            <div class="info-box"><strong>Not:</strong> Sunucu motor ayarlarÄ± (threads vb.) `docker-compose.yml` Ã¼zerinden yÃ¶netilir.</div>
        </aside>
    </div>
    <script src="app.js"></script>
</body>
</html>