# docker-compose.gpu.yml
# Üretim ortamında GPU imajını çekmek için kullanılır.
# Kullanım: docker compose -f docker-compose.yml -f docker-compose.gpu.yml up -d
services:
  llm-llama-service:
    image: ghcr.io/sentiric/sentiric-llm-llama-service:latest-gpu
    environment:
      # GPU için varsayılan katman sayısını ezer
      - LLM_LLAMA_SERVICE_GPU_LAYERS=${LLM_LLAMA_SERVICE_GPU_LAYERS:-28}
    deploy:
      resources:
        reservations:
          devices:
            - driver: nvidia
              count: 1
              capabilities: [gpu]